<section
    class="bg-white dark:bg-[#1a1d2d] rounded-xl p-6 shadow-sm border border-[#e7e9f3] dark:border-gray-800 relative overflow-hidden">
    <div class="flex items-center justify-between mb-6 pb-4 border-b border-[#f0f2f5] dark:border-gray-700">
        <div class="flex items-center gap-3">
            <span class="material-symbols-outlined text-primary text-[24px]">credit_card</span>
            <h2 class="text-lg font-bold text-[#0d101c] dark:text-white">Moyen de paiement</h2>
        </div>
        <div class="flex gap-1">
            <img alt="Visa" class="h-6 object-contain grayscale opacity-50"
                src="https://lh3.googleusercontent.com/aida-public/AB6AXuC1Ev9h0-x-JFCotER94CJFjgRE0loOocxNzwLxz5AnFNXFQNVwRlj-FfPOOYMjqsyy0yhj23xa8ubG2ZaPC4XyCYX_SVVBrdYQ-9SqLDDUEjmacsByvoyzAiZFSiAFh6fGBJLLkTKfsBFxBq01tFuQFrL6fS7AQe91kG32eP_YETKhYeYvCLJrDxr0k9nT3AkpOxsKt7fJzOvBv-zgJQp9kLqiMKkgqkUSz4EJq3Yli5lQzcsmHFmyZfF6pF_zXYVU5NgmyJIsdvE" />
            <img alt="Mastercard" class="h-6 object-contain grayscale opacity-50"
                src="https://lh3.googleusercontent.com/aida-public/AB6AXuBBUIOUzYE8GwbDkcW4hNneJmeRcTgZAl6So7OXgkJV-oIDCMOSTHbYzjnNdJ207edUSyxIjk1NouHAlSupjmJ0a3xs00NlbofQ7wQrHn4BNX2uw0WywOC-wEwYHl8yPBGoTbMJjOMYK_14IOG4F38PvaACoCGENwgVQDSurCf1NF3sqdf2tnZnUfa8yjB8nlZ5JwfnPmOFCe5bS_a9pMSZbcwAp0sXvgKb3ZJR-53lsAnBvGo5U7gZHAyKti6wy_oDtl2sKF0AkkM" />
        </div>
    </div>

    <app-payment-method (methodChange)="onMethodChange($event)" />

    @if (selectedMethod() === PaymentMethod.CARD) {
    <form class="space-y-5">
        <app-form-input [label]="'Numéro de carte'" [placeholder]="'0000 0000 0000 0000'"
            [value]="fields.cardNumber.value()" [name]="'cardNumber'" [error]="fields.cardNumber.error()"
            [icon]="'credit_card'" [maxlength]="19" [forceShowError]="showErrors()"
            (blurred)="onFieldBlur('cardNumber', $event)" />

        <div class="grid grid-cols-2 gap-5">
            <app-form-input [label]="'Date d\'expiration'" [placeholder]="'MM / AA'" [value]="fields.expiryDate.value()"
                [name]="'expiryDate'" [error]="fields.expiryDate.error()" [maxlength]="7"
                [forceShowError]="showErrors()" (blurred)="onFieldBlur('expiryDate', $event)" />
            <app-form-input [label]="'CVC'" [placeholder]="'123'" [value]="fields.cvc.value()" [name]="'cvc'"
                [error]="fields.cvc.error()" [maxlength]="3" [helpText]="'3 chiffres au dos de la carte'"
                [helpIcon]="'help'" [forceShowError]="showErrors()" (blurred)="onFieldBlur('cvc', $event)" />
        </div>

        <app-form-input [label]="'Nom sur la carte'" [placeholder]="'Jean Dupont'"
            [value]="fields.cardholderName.value()" [name]="'cardholderName'" [error]="fields.cardholderName.error()"
            [forceShowError]="showErrors()" (blurred)="onFieldBlur('cardholderName', $event)" />
    </form>
    } @else if (selectedMethod() === PaymentMethod.PAYPAL) {
    <div
        class="p-8 flex flex-col items-center text-center gap-4 bg-orange-50 dark:bg-orange-900/10 border border-orange-200 dark:border-orange-900/30 rounded-2xl">
        <div
            class="size-16 flex items-center justify-center bg-orange-100 dark:bg-orange-900/30 text-orange-600 dark:text-orange-400 rounded-full">
            <span class="material-symbols-outlined text-[32px]">warning</span>
        </div>
        <div>
            <h3 class="font-bold text-orange-900 dark:text-orange-200 text-lg">PayPal n'est pas encore disponible</h3>
            <p class="text-orange-800 dark:text-orange-300 text-sm">Nous travaillons sur l'intégration de PayPal. Pour
                l'instant, veuillez utiliser le paiement par carte bancaire.</p>
        </div>
    </div>
    }

    <div
        class="mt-6 p-4 bg-gray-50 dark:bg-[#131625] rounded-lg flex items-start gap-3 border border-gray-100 dark:border-gray-700">
        <span class="material-symbols-outlined text-primary text-[20px] mt-0.5">lock</span>
        <div>
            <p class="text-xs font-bold text-[#0d101c] dark:text-white mb-1">Paiement 100% sécurisé</p>
            <p class="text-xs text-gray-500 leading-relaxed">Vos données bancaires sont chiffrées (SSL 256-bit) et ne
                sont jamais stockées sur nos serveurs.</p>
        </div>
    </div>
</section>