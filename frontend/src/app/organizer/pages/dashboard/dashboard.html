<div class="flex h-screen w-full overflow-hidden">
	<app-side-bar></app-side-bar>

	<main class="flex-1 flex flex-col h-full overflow-hidden bg-background-light dark:bg-background-dark relative">
		<!-- Scrollable Content -->
		<div class="flex-1 overflow-y-auto custom-scrollbar">
			<div class="p-6 max-w-[1400px] mx-auto w-full space-y-8 pb-20">

				<!-- KPI Cards Row -->
				@if(kpiService.loading()) {
				<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-5">
					@for (i of [1,2,3,4]; track i) {
					<div class="h-32 rounded-2xl bg-slate-100 dark:bg-white/5 animate-pulse"></div>
					}
				</div>
				}

				@if(kpiService.kpiData(); as kpis) {
				<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-5">
					<app-kpi-card [title]="kpis.revenue.title" [value]="kpis.revenue.value" [icon]="'attach_money'"
						[trendIcon]="kpis.revenue.trendIcon" [trend]="kpis.revenue.trend" [sub]="kpis.revenue.sub">
					</app-kpi-card>

					<app-kpi-card [title]="kpis.customers.title" [value]="kpis.customers.value" [icon]="'group'"
						[trendIcon]="kpis.customers.trendIcon" [trend]="kpis.customers.trend"
						[sub]="kpis.customers.sub">
					</app-kpi-card>

					<app-kpi-card [title]="kpis.conversion.title" [value]="kpis.conversion.value" [icon]="'trending_up'"
						[trendIcon]="kpis.conversion.trendIcon" [trend]="kpis.conversion.trend"
						[sub]="kpis.conversion.sub">
					</app-kpi-card>

					<app-kpi-card [title]="kpis.orders.title" [value]="kpis.orders.value" [icon]="'shopping_cart'"
						[trendIcon]="kpis.orders.trendIcon" [trend]="kpis.orders.trend" [sub]="kpis.orders.sub">
					</app-kpi-card>
				</div>
				}

				<!-- Main Chart Section -->
				<div class="animate-fadeIn">
					<app-sales-chart></app-sales-chart>
				</div>

				<!-- Events Table & Alerts -->
				<div class="grid grid-cols-1 lg:grid-cols-3 gap-6 animate-fadeIn">
					<app-events-table></app-events-table>
					<app-alerts></app-alerts>
				</div>

			</div>
		</div>
	</main>
</div>